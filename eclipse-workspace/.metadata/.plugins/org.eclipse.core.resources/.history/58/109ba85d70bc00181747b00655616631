package compositor;

import java.awt.Color;
import java.awt.Image;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Hashtable;

import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.border.Border;
import javax.swing.border.TitledBorder;

public class FigurePanel extends JPanel{
	
	//private Hashtable<String, String> figuresImgPath;
	private String imageBaseUrl;
	
	//public FigurePanel() {}
	private String getImageBaseUrl() {
		return  "http://github.com/maira1001001/Laboratorio-de-Software-2018/blob/master/images/";
	}
	
	private URL buildImageUrl(String typeOfFigure) {
		StringBuffer str = new StringBuffer();
		str.append(this.getImageBaseUrl()).append(typeOfFigure).append("?raw=true");
		URL url = new URL(str.toString());
		return url;
	}
		
	public void  initializeComponents() {
		defineFeaturePanel();
		drawFigure("quaver");
		drawFigure("minim");
		drawFigure("crotchet");
		
		drawFigure("semiquaver");
		drawFigure("demisemiquaver");
		drawFigure("hemidemisemiquaver");
	}
	
	private void defineFeaturePanel() {
		Border blueLine = BorderFactory.createLineBorder(Color.blue);
		TitledBorder title = BorderFactory.createTitledBorder(blueLine, "FIGURA");
		title.setTitleJustification(TitledBorder.CENTER);
		title.setTitleColor(Color.blue);
		this.setBorder(title);
	}

	private void drawFigure(String typeOfFigure) {
		JLabel minimLabel = new JLabel();
		ImageIcon minimIconImage = createFigureIcon(figuresImgPath.get(typeOfFigure));
		minimLabel.setIcon(minimIconImage);
		this.add(minimLabel);
	}
	
	private ImageIcon createFigureIcon(String figureUrlString) {
		try {
			URL url = new URL(figureUrlString);
			ImageIcon imageIcon = new ImageIcon(url);
			Image image = imageIcon.getImage(); // transform it 
			Image newimg = image.getScaledInstance(30, 30,  java.awt.Image.SCALE_SMOOTH); // scale it the smooth way  
			return imageIcon = new ImageIcon(newimg);
		} catch (MalformedURLException e) {
			e.printStackTrace();
			//TODO ver de devolver una imagen "sin imagen"
			return null;
		}
	}

}
